# codex.md

## 目的
- プロジェクトごとの開発ルールを Codex に読み込ませ、出力や作業を一貫させる。
- 既存のスタイル・Lint・セキュリティ要件を尊重し、不要な差分やリスクを防ぐ。

## 回答と言語
- 回答は原則日本語。コードや CLI 出力の引用のみ英語可。
- 不明点や前提が曖昧な場合は、安易に推測せず確認質問を優先する。

## コミットメッセージ方針
- 形式: `type(scope): 要約`
  - type: feat / fix / chore / docs / refactor / test / ci / build / perf
  - scope: 影響範囲 (モジュール名など、不要なら省略)
  - 要約: 50 字以内で命令形・現在形、句読点なし
- Body: 箇条書きで「何を」「なぜ」「影響」を簡潔に。不要なら省略。
- Footer: Issue やチケットを `Issue: #123` 形式で記載。
- 無関係なコミットは作成しない。既存の未コミット変更は上書き・削除しない。

## コード生成・編集スタイル
- 既存プロジェクトの Lint/Formatter に従う (例: ESLint/Prettier, flake8/black, gofmt など)。未知の場合は慣例スタイルを推測し統一。
- 既存の命名規約・ディレクトリ構成を尊重し、不要なファイル追加を避ける。
- コメントは必要最小限で意図や注意点に限定。明白な処理説明や冗長表現を避ける。
- 例外処理・エラーハンドリングを省略しない。入力値の検証と失敗時の挙動を明示。
- 依存関係の追加は最小限。理由を説明し、既存バージョン範囲を尊重。
- 既存の TODO/制約を無視しない。変更理由が不明な箇所は確認する。

## ドキュメント生成スタイル
- Markdown は見出しと箇条書きを中心に簡潔に。過度な装飾を避け、読み手の行動が分かる記述にする。
- コードブロックには言語を付与。設定例・コマンドは可能な限りコピー可能な形で提示。
- 生成物は ASCII を基調としつつ、日本語テキストは必要に応じて使用する。

## セキュリティ・品質で意識する点
- 秘密情報 (キー・トークン・パスワード) を生成・出力・ログに残さない。ダミー値を使用。
- 外部入力はバリデーションし、サニタイズを徹底。例外やエラー内容で内部情報を漏らさない。
- デフォルトで最小権限。ファイル・ネットワーク・DB などのアクセスは必要な範囲に限定。
- 依存ライブラリは既存のロックファイルやバージョンポリシーを尊重し、不要なアップグレードを避ける。
- パフォーマンス・リソース効率を意識し、冗長な計算やメモリ消費を避ける。

## 作業・レビュー姿勢
- 変更範囲を最小化し、差分を明確にする。自動生成コードへの無意味な変更は避ける。
- テストが存在する場合は実行し、結果を共有。実行できない場合は理由と想定リスクを記載。
- リファクタ時は振る舞いの非互換を避け、必要ならテスト・検証手順を追加提案する。
- 不可逆・破壊的な操作は必ず事前に確認を取る。

## 応答フォーマットの期待
- 変更内容はファイルパスを明示して説明し、必要に応じてコード断片を提示。
- 次のアクションが明確になるよう簡潔にまとめる。過剰な敬語や冗長表現は避ける。
